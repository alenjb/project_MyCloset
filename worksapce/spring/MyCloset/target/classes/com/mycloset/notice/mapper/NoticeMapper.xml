<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycloset.notice.mapper.NoticeMapper">
<!-- 1.리스트(list) -->

<select id="list" resultType="com.mycloset.notice.vo.NoticeVO">
		select no, title, writer, writeDate, endDate
		from(	
			select (@ROWNUM:=@ROWNUM+1) AS RNUM, no, title, writer, writeDate, endDate
			from(
				select no, title, writer, writeDate, endDate
				from notice
				where 1=1
<!-- 				<include refid="search"/> -->
<!-- 				<include refid="searchPeriod"/> -->
				order by writeDate desc
				) AS A, (SELECT @ROWNUM:=0) AS B
                
			) AS C
<!-- 			아직 row 처리를 안함 -->
<!--             where C.RNUM between #{startRow} and #{endRow} -->
</select>
<!-- 1-1 전체 데이터 개수(getTotalRow) -->
<select id="getTotalRow" resultType="long">
	select count(*)
	from notice
	where 1=1
</select>

<!-- 2.글보기(view) -->
<select id="view" resultType="com.mycloset.notice.vo.NoticeVO">
	select no, title,content, writer, writeDate, endDate
		from notice
		where no =
		#{no}
</select>

<!-- 3.글쓰기(write) -->
<insert id="write">
	insert into notice(title, content, writer, writeDate, endDate)
	values(#{title}, #{content}, #{writer}, #{writeDate}, #{endDate})
</insert>
<!-- 4. 수정(update) -->
<update id="update">
	update notice set title=#{title}, content=#{content}, writer=#{writer}, writeDate=SYSDATE(), endDate=#{endDate}
	where no = #{no}
</update>
<!-- 5. 삭제(delete) -->
<delete id="delete">
	delete from notice
	where no =#{no}
</delete>
</mapper>